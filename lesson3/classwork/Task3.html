<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Task 3</title>
    <link rel="stylesheet" href="css/normalize.css" />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div class="wrap" id="wrap">
      <h1>Переключение слайдера</h1>
      <div class="roadMap__container yellow">
        <button class="navButton" data-direction="<"> Prev </button>
        <div class="roadMap">
          <div class="roadMapPoint" data-id="1"></div>
          <div class="roadMapPoint ball" data-id="2"></div>
          <div class="roadMapPoint" data-id="3"></div>
          <div class="roadMapPoint" data-id="4"></div>
          <div class="roadMapPoint" data-id="5"></div>
          <div class="roadMapPoint" data-id="6"></div>
          <div class="roadMapPoint" data-id="7"></div>
          <div class="roadMapPoint" data-id="8"></div>
        </div>
        <button class="navButton" data-direction=">"> Next </button>
      </div>

      <div class="roadMap__container red">
        <button class="navButton" data-direction="<"> Prev </button>
        <div class="roadMap">
          <div class="roadMapPoint" data-id="1"></div>
          <div class="roadMapPoint" data-id="2"></div>
          <div class="roadMapPoint ball" data-id="3"></div>
          <div class="roadMapPoint" data-id="4"></div>
        </div>
        <button class="navButton" data-direction=">"> Next </button>
      </div>

      <div class="roadMap__container blue">
        <button class="navButton" data-direction="<"> Prev </button>
        <div class="roadMap">
          <div class="roadMapPoint" data-id="1"></div>
          <div class="roadMapPoint ball" data-id="2"></div>
          <div class="roadMapPoint" data-id="3"></div>
          <div class="roadMapPoint" data-id="4"></div>
        </div>
        <button class="navButton" data-direction=">"> Next </button>
      </div>


      <div class="roadMap__container red">
          <button class="navButton" data-direction="<"> Prev </button>
          <div class="roadMap">
            <div class="roadMapPoint" data-id="1"></div>
            <div class="roadMapPoint" data-id="2"></div>
            <div class="roadMapPoint ball" data-id="3"></div>
            <div class="roadMapPoint" data-id="4"></div>
          </div>
          <button class="navButton" data-direction=">"> Next </button>
        </div>
  
        <div class="roadMap__container blue">
          <button class="navButton" data-direction="<"> Prev </button>
          <div class="roadMap">
            <div class="roadMapPoint" data-id="1"></div>
            <div class="roadMapPoint ball" data-id="2"></div>
            <div class="roadMapPoint" data-id="3"></div>
            <div class="roadMapPoint" data-id="4"></div>
          </div>
          <button class="navButton" data-direction=">"> Next </button>
        </div>

    </div>
    <script>

      /*
        Задание:

        Написать скрипт, который будет приводить в действие переключалки из разметки.
        И будет перемещать класс ball по точкам в зависимости от нажатой кнопки

      */

var containers = document.querySelectorAll('.roadMap__container');

containers.forEach( function (container){
    var roadMap = container.querySelector('.roadMap');    
    var navButton = container.querySelectorAll('.navButton');
    var roadMapPoints = roadMap.querySelectorAll('.roadMapPoint');   

    for(var i = 0; i < navButton.length;i++){
      navButton[i].addEventListener('click', function navButtons(e){
        var direction = e.target.dataset.direction;
        // console.log(direction);
        // console.log(roadMapPoints);
        var activeBall = container.querySelector('.ball')
        var activeBallId = activeBall.dataset.id;
        console.log(activeBallId)
        roadMapPoints.forEach(function(activeId){
          var moveId = activeId.dataset.id;
          // console.log(moveId)
          // console.log(roadMapPoints.length)
            if(activeBallId == moveId){
              // console.log(moveId)
              // console.log(roadMapPoints.length)
              activeBall.classList.remove('ball');
            }     
              if(direction === '<'){
                var nextBallId = activeBall.dataset.id - 1;
              }else if(direction === '>'){
                var q = activeBall.dataset.id;
                var nextBallId = +q + 1;
              }else{
                alert('error')
              } 
              var roadMapPointsArray = Array.from(roadMapPoints);
              console.log(nextBallId)
              if(0 < nextBallId && nextBallId < roadMapPointsArray.length + 1){       
                for(var i = 0;i < roadMapPointsArray.length; i++){
                      var roadMapId = roadMapPointsArray[i].dataset.id
                      console.log(roadMapId)
                  if(roadMapId == nextBallId){ 
                      roadMapPointsArray[i].classList.add('ball');
                  break;   
                  }
                }
              }else{
                activeBall.classList.add('ball');
              }
        })
      })  
  }
})



    </script>
  </body>

</html>
